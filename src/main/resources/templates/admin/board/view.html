<!DOCTYPE html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{admin/fragments/layout}"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity6">

<th:block layout:fragment="content">
    <section id="admin_config_info" class="admin__section">

        <article class="view">
            <table class="csInputTable csViewTable">
                <tr>
                    <td>Ï†úÎ™©</td>
                    <td>
                        <div>
                            [<span th:text="${boardDTO.typeName}"></span>]
                            [[${boardDTO.title}]]
                            <span class="date" style="float: right;"
                               th:text="${#temporals.format(boardDTO.regDate, 'yy-MM-dd')}">
                            </span>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>ÏûëÏÑ±Ïûê</td>
                    <td class="admin__uid" th:text="${boardDTO.nick}"></td>
                </tr>
                <tr>
                    <td>ÎÇ¥Ïö©</td>
                    <td class="content mt-3 mb-5">
                        <textarea>[[${boardDTO.content}]]</textarea>
                    </td>
                </tr>
            </table>
            <!-- TODO Ïó¨Í∏∞Ïóê Í∂åÌïú ÏÑ§Ï†ïÌï¥ÏÑú ÏÑ§Ï†ï Ìï¥Ï§òÏïºÌï® -->
            <th:block>
                <div class="admin_board_right">
                    <a th:href="@{/admin/board/modify(bno=${boardDTO.bno}, group=${boardDTO.group})}"
                       class="">Í≤åÏãúÍ∏Ä ÏàòÏ†ï</a>
                    <a href="#" class="board_deleteBtn" th:data-bno="${boardDTO.bno}">Í≤åÏãúÍ∏Ä ÏÇ≠Ï†ú</a>
                    <input class="board__group" type="hidden" name="group" th:value="${boardDTO.group}" th:data-group="${boardDTO.group}" />
                </div>
            </th:block>

            <section class="commentList">
                <article class="comments">
                    <span>ÎåìÍ∏Ä üìù</span>
                    <th:block th:each="comment : ${comments}">
                        <!-- todo Ïó¨Í∏∞ÎèÑ Ïù¥ Ï°∞Í±¥Ïù¥ ÏïÑÎãåÎç∞ ÏùºÎã® Ïù¥Î†áÍ≤å Ìï¥Îë† -->
                        <div th:if="${comment.comment == null}">
                            <div class="comment">
                                <span th:text="${comment.nick}"></span>
                                <span class="date"
                                      th:text="${#temporals.format(comment.CRegDate, 'yy-MM-dd')}">
                                </span>
                                <textarea class="commentArea" name="comment" th:text="${comment.CComment}"
                                          th:data-cComment="${comment.CComment}" readonly></textarea>
                            </div>
                            <!-- TODO Ïó¨Í∏∞Ïóê Í∂åÌïú ÏÑ§Ï†ïÌï¥ÏÑú ÏÑ§Ï†ï Ìï¥Ï§òÏïºÌï® -->
                            <th:block>
                                <div class="admin_board_left commentClick">
                                    <a th:href="@{/admin/board/commentModify(bno=${comment.cbno})}"
                                       class="comment__modify1">ÎåìÍ∏Ä ÏàòÏ†ï</a>
                                    <a href="#" class="comment__modify" th:data-comment="${comment.CComment}"
                                       th:data-cbno="${comment.cbno}" th:data-parent="${comment.bno}">||ÏàòÏ†ï||</a>
                                    <a href="#" class="comment__delete" th:data-cbno="${comment.cbno}" th:data-parent="${comment.bno}">ÎåìÍ∏Ä ÏÇ≠Ï†ú</a>

                                    <a href="#" class="btnBack">ÏûëÏÑ± Ï∑®ÏÜå</a>
                                    <a href="#" class="modifyComplete"
                                       th:data-parent="${comment.bno}" th:data-cbno="${comment.cbno}">ÏàòÏ†ï ÏôÑÎ£å</a>
                                </div>
                            </th:block>
                        </div>
<!--                        <div th:unless="${comment.comment == null}">
                            <p class="empty">Îì±Î°ùÎêú ÎåìÍ∏ÄÏù¥ ÏóÜÏäµÎãàÎã§.</p>
                        </div>-->
                    </th:block>

                    <form th:action="@{/admin/board/commentWrite}" method="post">
                        <input type="hidden" name="bno" th:value="${boardDTO.bno}" />
                        <!-- TODO #authentication.principal.member.uid(?) session?Î°ú ÏÑ§Ï†ï Ìï¥Ï§òÏïºÌï® -->
                        <input type="hidden" name="uid" th:value="${boardDTO.uid}" />
                        <input type="hidden" name="group" th:value="${boardDTO.group}" />
                        <input type="hidden" name="cate" th:value="${boardDTO.cate}" />
                        <input type="hidden" name="type" th:value="${boardDTO.type}" />

                        <div>
                            <textarea name="comment"></textarea>
                            <div class="admin_board_right">
                                <input type="reset" class="btnReset" value="Ï∑®ÏÜå" />
                                <input type="submit" class="" value="ÎåìÍ∏Ä ÏûëÏÑ±">
                            </div>
                        </div>
                    </form>
                </article>
            </section>
            <div class="boardList">
                <a th:href="@{/admin/board/list(group=${boardDTO.group})}" class="btnList">Î™©Î°ùÎ≥¥Í∏∞</a>
            </div>
        </article>
    </section>
</th:block>
</html>
<script th:src="@{/js/admin/boardDelete.js}"></script>
<script th:src="@{/js/admin/boardModifyComment.js}"></script>
