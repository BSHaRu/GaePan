<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="co.kr.gaepan.mapper.pet.PetListMapper">

    <select id="mainmissinglist" resultType="co.kr.gaepan.dto.pet.PetRegisterDTO">

        SELECT
            a.*,
            b.tName
        FROM gp_pet AS a
        JOIN gp_pet_type AS b
        ON a.type = b.type
        WHERE division = 2 ORDER BY `no` DESC LIMIT 10;

    </select>

    <select id="mainpetdoglist" resultType="co.kr.gaepan.dto.pet.PetRegisterDTO">

        SELECT
            a.*,
            b.tName
        FROM gp_pet AS a
                 JOIN gp_pet_type AS b
                      ON a.`type` = b.`type`
        WHERE a.cate= 1 AND division = 1
        ORDER BY `no` DESC
        LIMIT 12;

    </select>

    <select id="mainpetcatlist" resultType="co.kr.gaepan.dto.pet.PetRegisterDTO">

        SELECT
            a.*,
            b.tName
        FROM gp_pet AS a
                 JOIN gp_pet_type AS b
                      ON a.`type` = b.`type`
        WHERE a.cate= 2 AND division = 1
        ORDER BY `no` DESC
        LIMIT 12;

    </select>

    <select id="mainpetetclist" resultType="co.kr.gaepan.dto.pet.PetRegisterDTO">

        SELECT
            a.*,
            b.tName
        FROM gp_pet AS a
                 JOIN gp_pet_type AS b
                      ON a.`type` = b.`type`
        WHERE a.cate= 3 AND division = 1
        ORDER BY `no` DESC
        LIMIT 12;

    </select>

    <select id="petcategory" resultType="co.kr.gaepan.dto.pet.PetCateDTO">

        SELECT * FROM gp_pet_cate

    </select>
    <select id="petType" resultType="co.kr.gaepan.dto.pet.PetTypeDTO">

        SELECT * FROM gp_pet_type WHERE cate= #{cate};

    </select>

    <select id="pet" resultType="co.kr.gaepan.dto.pet.PetRegisterDTO">

        SELECT * FROM gp_pet WHERE `no`= #{no};

    </select>

    <select id="searchPets" resultType="co.kr.gaepan.dto.pet.PetRegisterDTO">
        SELECT
        gp_pet.*,
        gp_pet_type.tName,
        gp_pet_cate.cName
        FROM gp_pet as a
        LEFT JOIN gp_pet_type as b ON gp_pet.cate = pet_type.cate
        LEFT JOIN gp_pet_cate as c ON gp_pet.cate = pet_cate.cate
        WHERE
        <if test="tName != null and tName.length() > 0">
            AND gp_pet_type.tName = #{tName}
        </if>
        <if test="cName != null and cName.length() > 0">
            AND gp_pet_cate.cName = #{cName}
        </if>
        <if test="name != null and cName.length() > 0">
            AND gp_pet.name = #{name}
        </if>
    </select>

</mapper>